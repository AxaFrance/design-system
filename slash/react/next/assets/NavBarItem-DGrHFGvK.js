import{j as i}from"./index-DK-fRI8B.js";import{r,e as x}from"./index-DbaA8R3S.js";import{p as j}from"./Loader-Cc92k9M2.js";const A=(e,s,o)=>{switch(o){case"ArrowRight":case"ArrowDown":return s+1<e?s+1:0;case"ArrowLeft":case"ArrowUp":return s-1<0?e-1:s-1;default:return s}},d=(e,s,o)=>{!e||o||(s?e.focus():e.blur())},$=({tabIndex:e=-1,role:s="menuitem",children:o,hasFocus:m,handleKeys:u,isMenuOpen:l,className:v,classModifier:N,actionElt:a,...C})=>{const n=j(v,N,"af-nav__item"),c=r.useRef(null);r.useEffect(()=>{d(c==null?void 0:c.current,m,l)},[m,l]);const p=r.useMemo(()=>m&&l&&o?"af-nav__item--open":"",[o,m,l]);return i.jsxs("li",{className:`${n} ${p}`,role:"none",onKeyDown:w=>{w.preventDefault(),u(w)},children:[i.jsx(a.type,{...a.props,...C,role:s,tabIndex:e,"aria-expanded":l,ref:c},a.key),o]})},y="af-nav__item",R=({children:e,hasFocus:s=!1,actionElt:o,ariaLabel:m="",tabIndex:u=-1,role:l="menuitem",className:v=y,...N})=>{const[a,C]=r.useState(!1),[n,c]=r.useState(0),p=r.useCallback(t=>{const f=A(x.Children.count(e),n,t);c(f)},[n,e]),w=r.useCallback(()=>{e&&C(!0)},[e]),_=r.useCallback(()=>{C(!1),c(0)},[]),b=r.useCallback(({key:t})=>{e&&(t==="ArrowDown"&&(a?p(t):w()),t==="ArrowUp"&&a&&(n===0?_():p(t)),(t==="ArrowRight"||t==="ArrowLeft"||t==="Escape")&&_())},[e,a,n,p,w,_]),g=r.useCallback((t,f)=>x.cloneElement(t,{classModifier:f===n&&a?" active":void 0,tabIndex:f===n&&a?0:-1,key:`child${f}`,hasFocus:s&&n===f&&a}),[n,a,s]);return i.jsx($,{className:v,role:l,hasFocus:s,tabIndex:u,isMenuOpen:a,handleKeys:b,actionElt:o,...N,children:e&&i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"glyphicon glyphicon-arrow-xs-down"},`icon${u}`),i.jsx("ul",{className:"af-nav__list af-nav__list--children",role:"menu","aria-label":m,children:x.Children.map(e,g)},`list${u}`)]})})};export{R as N,A as g};
