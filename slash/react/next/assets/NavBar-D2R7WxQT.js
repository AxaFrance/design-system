import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as m,e as h}from"./index-DbaA8R3S.js";import{g as v}from"./NavBarItem-B8_qFf0p.js";import{o as N}from"./Loader-DKCOs5NC.js";const j="af-nav-container",x=({isVisible:p=!0,onClick:o,id:t="mainmenu",toggleMenuId:r="togglemenu",isMenuFocused:l,className:i,classModifier:d,handleKeys:c,onFocus:f,onBlur:e,children:n})=>{const u=N(i,d,j);return a.jsxs("div",{className:u,children:[a.jsx("button",{"aria-controls":t,"aria-haspopup":"true",type:"button",onClick:o,className:`mask fade ${p?"show":""}`,id:`open-${r}`,"aria-label":"Open Menu"}),a.jsx("nav",{className:`af-nav af-drawer left ${p?"show":""}`,role:"navigation","aria-label":"Menu principal",children:a.jsxs("div",{className:"container af-nav__wrapper",children:[a.jsxs("div",{className:"af-nav__aside-header",children:[a.jsx("h4",{className:"af-nav__aside-title",children:"Menu"}),a.jsx("button",{"aria-controls":t,"aria-haspopup":"true",onClick:o,type:"button",className:"af-nav__aside-close",id:`close-${r}`,"aria-label":"Close Menu",children:"Ã—"})]}),a.jsx("ul",{onKeyDown:s=>{s.preventDefault(),c(s.key)},onFocus:s=>{f({e:s})},onBlur:s=>{e({e:s})},className:`af-nav__list ${l?"af-nav__list--focused":""}`,role:"menubar",id:t,children:n})]})})]})},w=({positionInit:p=0,children:o,...t})=>{const[r,l]=m.useState(!1),[i,d]=m.useState(p),c=m.useMemo(()=>(h.Children.map(o,e=>m.isValidElement(e)&&e)??[]).filter(e=>!!e),[o]),f=m.useCallback(e=>{if(e==="Escape"&&l(!1),e==="ArrowRight"||e==="ArrowLeft"){const n=v(c.length,i,e);d(n)}},[i,c]);return a.jsx(x,{...t,onFocus:()=>l(!0),onBlur:()=>l(!1),handleKeys:f,isMenuFocused:r,children:h.Children.map(c,(e,n)=>{const u=n===i;return h.cloneElement(e,{key:"NavBarItem",classModifier:[e.props.classModifier,u?"active":void 0].filter(s=>!!s).join(" "),tabIndex:u?0:-1,index:n,hasFocus:r&&u,onClick:()=>d(n)})})})};export{w as N};
