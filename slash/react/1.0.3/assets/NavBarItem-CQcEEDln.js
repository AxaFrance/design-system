import{j as r}from"./jsx-runtime-Cw0GR0a5.js";import{r as o,R as g}from"./index-CTjT7uj6.js";import{g as T}from"./getComponentClassName-C7V7Z2-u.js";const M=(e,a,i)=>{switch(i){case"ArrowRight":case"ArrowDown":return a+1<e?a+1:0;case"ArrowLeft":case"ArrowUp":return a-1<0?e-1:a-1;default:return a}},L="af-nav-container",N=({isVisible:e=!0,onClick:a,id:i="mainmenu",toggleMenuId:c="togglemenu",isMenuFocused:d,className:u,classModifier:v,handleKeys:f,onFocus:s,onBlur:t,children:n})=>{const m=T(u,v,L);return r.jsxs("div",{className:m,children:[r.jsx("button",{"aria-controls":i,"aria-haspopup":"true",type:"button",onClick:a,className:`mask fade ${e?"show":""}`,id:`open-${c}`,"aria-label":"Open Menu"}),r.jsx("nav",{className:`af-nav af-drawer left ${e?"show":""}`,role:"navigation","aria-label":"Menu principal",children:r.jsxs("div",{className:"container af-nav__wrapper",children:[r.jsxs("div",{className:"af-nav__aside-header",children:[r.jsx("h4",{className:"af-nav__aside-title",children:"Menu"}),r.jsx("button",{"aria-controls":i,"aria-haspopup":"true",onClick:a,type:"button",className:"af-nav__aside-close",id:`close-${c}`,"aria-label":"Close Menu",children:"Ã—"})]}),r.jsx("ul",{onKeyDown:l=>{l.preventDefault(),f(l.key)},onFocus:l=>{s({e:l})},onBlur:l=>{t({e:l})},className:`af-nav__list ${d?"af-nav__list--focused":""}`,role:"menubar",id:i,children:n})]})})]})};N.__docgenInfo={description:"",methods:[],displayName:"NavBarBase",props:{isVisible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},id:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"mainmenu"',computed:!1}},toggleMenuId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"togglemenu"',computed:!1}},isMenuFocused:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: MouseEvent<HTMLButtonElement>) => void",signature:{arguments:[{type:{name:"MouseEvent",elements:[{name:"HTMLButtonElement"}],raw:"MouseEvent<HTMLButtonElement>"},name:"event"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},classModifier:{required:!1,tsType:{name:"string"},description:""},handleKeys:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"void"}}},description:""},onFocus:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: { e: FocusEvent<HTMLUListElement> }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ e: FocusEvent<HTMLUListElement> }",signature:{properties:[{key:"e",value:{name:"FocusEvent",elements:[{name:"HTMLUListElement"}],raw:"FocusEvent<HTMLUListElement>",required:!0}}]}},name:"action"}],return:{name:"void"}}},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"(action: { e: FocusEvent<HTMLUListElement> }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ e: FocusEvent<HTMLUListElement> }",signature:{properties:[{key:"e",value:{name:"FocusEvent",elements:[{name:"HTMLUListElement"}],raw:"FocusEvent<HTMLUListElement>",required:!0}}]}},name:"action"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}};const h=({positionInit:e=0,children:a,...i})=>{const[c,d]=o.useState(!1),[u,v]=o.useState(e),f=o.useMemo(()=>(g.Children.map(a,t=>o.isValidElement(t)&&t)??[]).filter(t=>!!t),[a]),s=o.useCallback(t=>{if(t==="Escape"&&d(!1),t==="ArrowRight"||t==="ArrowLeft"){const n=M(f.length,u,t);v(n)}},[u,f]);return r.jsx(N,{...i,onFocus:()=>d(!0),onBlur:()=>d(!1),handleKeys:s,isMenuFocused:c,children:g.Children.map(f,(t,n)=>{const m=n===u;return g.cloneElement(t,{key:"NavBarItem",classModifier:[t.props.classModifier,m?"active":void 0].filter(l=>!!l).join(" "),tabIndex:m?0:-1,index:n,hasFocus:c&&m})})})};h.__docgenInfo={description:"",methods:[],displayName:"NavBar",props:{id:{required:!1,tsType:{name:"string"},description:""},toggleMenuId:{required:!1,tsType:{name:"string"},description:""},positionInit:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},isVisible:{required:!0,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"event"}],return:{name:"void"}}},description:""}}};const B=(e,a,i)=>{!e||i||(a?e.focus():e.blur())},q=({tabIndex:e=-1,role:a="menuitem",children:i,hasFocus:c,handleKeys:d,isMenuOpen:u,className:v,classModifier:f,actionElt:s,...t})=>{const n=T(v,f,"af-nav__item"),m=o.useRef(null);o.useEffect(()=>{B(m==null?void 0:m.current,c,u)},[c,u]);const l=o.useMemo(()=>c&&u&&i?"af-nav__item--open":"",[i,c,u]);return r.jsxs("li",{className:`${n} ${l}`,role:"none",onKeyDown:E=>{E.preventDefault(),d(E)},children:[r.jsx(s.type,{...s.props,...t,role:a,tabIndex:e,"aria-expanded":u,ref:m},s.key),i]})};q.__docgenInfo={description:"",methods:[],displayName:"NavBarItemBase",props:{actionElt:{required:!0,tsType:{name:"ReactElement"},description:""},handleKeys:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: KeyboardEvent<HTMLLIElement>) => void",signature:{arguments:[{type:{name:"KeyboardEvent",elements:[{name:"HTMLLIElement"}],raw:"KeyboardEvent<HTMLLIElement>"},name:"event"}],return:{name:"void"}}},description:""},hasFocus:{required:!1,tsType:{name:"boolean"},description:""},isMenuOpen:{required:!1,tsType:{name:"boolean"},description:""},classModifier:{required:!1,tsType:{name:"string"},description:""},tabIndex:{defaultValue:{value:"-1",computed:!1},required:!1},role:{defaultValue:{value:'"menuitem"',computed:!1},required:!1}}};const C="af-nav__item",j=({children:e,hasFocus:a=!1,actionElt:i,ariaLabel:c="",tabIndex:d=-1,role:u="menuitem",className:v=C,...f})=>{const[s,t]=o.useState(!1),[n,m]=o.useState(0),l=o.useCallback(p=>{const y=M(g.Children.count(e),n,p);m(y)},[n,e]),E=o.useCallback(()=>{e&&t(!0)},[e]),w=o.useCallback(()=>{t(!1),m(0)},[]),_=o.useCallback(({key:p})=>{e&&(p==="ArrowDown"&&(s?l(p):E()),p==="ArrowUp"&&s&&(n===0?w():l(p)),(p==="ArrowRight"||p==="ArrowLeft"||p==="Escape")&&w())},[e,s,n,l,E,w]),b=o.useCallback((p,y)=>g.cloneElement(p,{classModifier:y===n&&s?" active":void 0,tabIndex:y===n&&s?0:-1,key:`child${y}`,hasFocus:a&&n===y&&s}),[n,s,a]);return r.jsx(q,{className:v,role:u,hasFocus:a,tabIndex:d,isMenuOpen:s,handleKeys:_,actionElt:i,...f,children:e&&r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"glyphicon glyphicon-arrow-xs-down"},`icon${d}`),r.jsx("ul",{className:"af-nav__list af-nav__list--children",role:"menu","aria-label":c,children:g.Children.map(e,b)},`list${d}`)]})})};j.__docgenInfo={description:"",methods:[],displayName:"NavBarItem",props:{ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},children:{required:!1,tsType:{name:"union",raw:"ReactElement | ReactElement[]",elements:[{name:"ReactElement"},{name:"Array",elements:[{name:"ReactElement"}],raw:"ReactElement[]"}]},description:""},hasFocus:{defaultValue:{value:"false",computed:!1},required:!1},tabIndex:{defaultValue:{value:"-1",computed:!1},required:!1},role:{defaultValue:{value:'"menuitem"',computed:!1},required:!1},className:{defaultValue:{value:'"af-nav__item"',computed:!1},required:!1}}};export{h as N,j as a};
